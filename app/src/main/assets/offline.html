<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#0ea5e9" />
  <title>Offline</title>
  <style>
    :root{
      --bg: #0b1220;
      --fg: #e5f0ff;
      --muted:#98a2b3;
      --accent:#0ea5e9;
      --ring:#60a5fa33;
      --card:#0f172a;
      --shadow: 0 10px 30px rgba(0,0,0,.25);
      --btn-bg:#0ea5e9;
      --btn-fg:#ffffff;
      --btn-bg-ok:#10b981;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f8fafc;
        --fg:#0f172a;
        --muted:#64748b;
        --accent:#0284c7;
        --ring:#0284c71f;
        --card:#ffffff;
        --shadow: 0 10px 30px rgba(2,8,23,.08);
        --btn-bg:#0284c7;
        --btn-fg:#ffffff;
        --btn-bg-ok:#059669;
      }
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1200px 800px at 50% -100px, var(--ring), transparent 60%), var(--bg);
      color: var(--fg);
      font: 500 16px/1.4 system-ui,-apple-system, Segoe UI, Roboto, Ubuntu, Cantarell,"Helvetica Neue", Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji";
      display: grid;
      place-items: center;
    }

    .card {
      width: min(560px, 92vw);
      background: var(--card);
      border-radius: 20px;
      box-shadow: var(--shadow);
      padding: 28px 28px 32px;
      text-align: center;
      border: 1px solid rgba(255,255,255,.06);
    }
    .art {
      width: 140px; height: 140px; margin: 8px auto 18px; position: relative;
      filter: drop-shadow(0 6px 16px rgba(0,0,0,.25));
    }
    .pulse { animation: pulse 2.4s ease-in-out infinite; transform-origin: 50% 50%; }
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1;}
      50%{ transform: scale(1.04); opacity: .96;}
      100%{ transform: scale(1); opacity: 1;}
    }
    .wave { animation: wave 2.4s ease-in-out infinite; }
    @keyframes wave {
      0% { opacity:.35; transform: translateY(0);}
      50%{ opacity:.12; transform: translateY(4px);}
      100%{ opacity:.35; transform: translateY(0);}
    }

    h1 {
      font-size: clamp(20px, 3.8vw, 28px);
      margin: 0 0 6px;
      letter-spacing: .2px;
    }
    p {
      margin: 8px 0 0;
      color: var(--muted);
    }

    .status-line{
      margin-top: 16px;
      font-weight: 700;
      display:flex; gap:8px; justify-content:center; align-items:baseline; flex-wrap:wrap;
    }
    .dots { letter-spacing:.15em; opacity:.85 }
    .nums {
      font-variant-numeric: tabular-nums;
      display:inline-flex; gap:6px; align-items:center;
    }
    .num {
      display:inline-block; min-width: 1.2ch;
      font-size: 28px; line-height:1;
      padding: 6px 10px; border-radius: 10px;
      background: linear-gradient(180deg, rgba(14,165,233,.14), rgba(14,165,233,.06));
      border: 1px solid rgba(14,165,233,.25);
      color: var(--accent);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
    }

    .foot { margin-top: 18px; font-size: 13px; color: var(--muted); opacity: .9; }

    .actions { margin-top: 18px; display:flex; justify-content:center; }
    .btn {
      display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
      font-weight:800; padding:12px 16px; border-radius:12px; border:none; cursor:pointer;
      background: var(--btn-bg); color: var(--btn-fg); box-shadow: var(--shadow);
      transition: transform .08s ease, opacity .2s ease, background .2s ease;
    }
    .btn:active { transform: translateY(1px); }
    .btn[disabled]{ opacity:.5; pointer-events:none; }
    .btn-ok { background: var(--btn-bg-ok); }
    .hide { display:none !important; }
  </style>
</head>
<body>
  <main class="card" role="main" aria-live="polite">
    <!-- Ilustração SVG leve (plug desconectado) -->
    <div class="art" aria-hidden="true">
      <svg viewBox="0 0 160 160" width="140" height="140">
        <circle class="wave" cx="80" cy="80" r="70" fill="none" stroke="url(#g1)" stroke-width="2"/>
        <defs>
          <linearGradient id="g1" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="var(--accent)" stop-opacity=".35"/>
            <stop offset="100%" stop-color="var(--accent)" stop-opacity=".05"/>
          </linearGradient>
        </defs>
        <rect x="44" y="60" rx="10" ry="10" width="72" height="48" fill="var(--bg)" stroke="var(--accent)" stroke-width="2.5"/>
        <rect x="54" y="50" width="10" height="16" rx="3" fill="var(--accent)" opacity=".9"/>
        <rect x="96" y="50" width="10" height="16" rx="3" fill="var(--accent)" opacity=".9"/>
        <path d="M116 84 C136 84, 144 96, 144 110 S132 136, 110 136" fill="none" stroke="var(--accent)" stroke-width="3" stroke-dasharray="6 6"/>
        <g class="pulse" transform="translate(64,82)">
          <path d="M0 0 L32 32 M32 0 L0 32" stroke="var(--accent)" stroke-width="3" stroke-linecap="round"/>
        </g>
      </svg>
    </div>

    <h1>Sem conexão</h1>
    <p>Fique tranquilo — estamos tentando reconectar.</p>

    <!-- Linha de status: "Tentando conexão... 5.4.3.2.1" -->
    <div class="status-line" id="statusLine" aria-live="polite" aria-atomic="true">
      <span class="dots">Tentando conexão…</span>
      <span class="nums" id="nums">
        <span class="num">5</span>
        <span class="num">4</span>
        <span class="num">3</span>
        <span class="num">2</span>
        <span class="num">1</span>
      </span>
    </div>

    <div class="actions">
      <button id="backBtn" class="btn btn-ok hide" type="button" aria-label="Voltar para a página anterior">✅ Internet Estabelecida</button>
    </div>

    <p class="foot" id="footHelp">O botão aparece assim que a internet voltar.</p>
  </main>

  <script>
    (function(){
      'use strict';

      // ===== Animação do "5.4.3.2.1" em loop (meramente visual)
      const nums = [5,4,3,2,1];
      const $nums = document.getElementById('nums');
      let idx = 0;
      setInterval(() => {
        // Rotaciona a fila de números visualmente
        idx = (idx + 1) % nums.length;
        // Atualiza os cinco blocos para sempre mostrar "5.4.3.2.1"
        // com um deslocamento para dar sensação de contagem
        const order = nums.slice(idx).concat(nums.slice(0, idx));
        // Render leve (evita recriar nós desnecessariamente)
        const children = $nums.children;
        for (let i = 0; i < children.length && i < order.length; i++) {
          children[i].textContent = order[i];
        }
      }, 1000);

      // ===== Lógica de reconexão
      const backBtn = document.getElementById('backBtn');
      const footHelp = document.getElementById('footHelp');
      let announced = false; // evita repetir UI

      function onBack(){
        // Volta apenas quando o usuário tocar
        try { history.back(); }
        catch(e){ /* sem-op */ }
      }
      backBtn.addEventListener('click', onBack);
      backBtn.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); onBack(); }
      });

      function showBackButton(){
        if (announced) return;
        announced = true;
        backBtn.classList.remove('hide');
        backBtn.focus({ preventScroll:true });
        if (footHelp) footHelp.textContent = 'Conexão restabelecida. Toque para voltar.';
        // opcional: leve vibração, se suportado
        try { if (navigator.vibrate) navigator.vibrate([120,60,120]); } catch(e){}
      }

      // 1) Evento nativo de rede
      window.addEventListener('online', showBackButton, { once:true });

      // 2) *Poll* para cobrir WebViews que não disparam 'online'
      const POLL_MS = 1200;
      const pollId = setInterval(() => {
        if (navigator.onLine) {
          clearInterval(pollId);
          showBackButton();
        }
      }, POLL_MS);

      // 3) Se o app voltar ao foco com rede, também checa
      window.addEventListener('focus', () => {
        if (navigator.onLine) showBackButton();
      }, { passive:true });
    })();
  </script>
</body>
</html>
